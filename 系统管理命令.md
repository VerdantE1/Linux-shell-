## 系统管理命令

###### 1.监测程序

**ps**   	默认情况下，输出当前控制台下的属于当前用户的进程。（只显示某个特定时间点的信息，如果想观察频繁换进换出的内存进程形势用top）

```shell
几组指令
ps -e  显示所有进程
ps -f  显示完整格式的输出
ps -l  显示长列表
列表：
F：内核分配给进程的系统标记。
S：进程的状态（O代表正在运行；S代表在休眠；R代表可运行，正等待运行；Z代表僵化，进程已结束但父进程已不存在；T代表停止）。
PRI：进程的优先级（越大的数字代表越低的优先级）。
NI：谦让度值用来参与决定优先级。
ADDR：进程的内存地址。
SZ：假如进程被换出，所需交换空间的大致大小。
WCHAN：进程休眠的内核函数的地址。
UID：启动这些进程的用户。
PID：进程的进程ID。
PPID：父进程的进程号（如果该进程是由另一个进程启动的）。
C：进程生命周期中的CPU利用率。
STIME：进程启动时的系统时间。
TTY：进程启动时的终端设备。
TIME：运行进程需要的累计CPU时间。
CMD：启动的程序名称。
```

**top** 			动态查看程序进程

```shell
f键对输出进行排序，d键允许你修改轮询间隔，q退出top
```

**kill**   进程号			 发送TERM信号强制终止程序

**killall** 文件名    		它支持进程名而不是PID来结束进程

```shell
killall http*  结束所有以http开头的
警告：以root用户身份登录系统时，使用killall命令要特别小心，因为很容易就会误用通配符而结束了重要的系统进程。这可能会破坏文件系统
```

**2.监测磁盘空间**

`系统管理员的另一个重要任务就是监测系统磁盘的使用情况。不管运行的是简单的Linux台 式机还是大型的Linux服务器，你都要知道还有多少空间可留给你的应用程序。 在Linux系统上有几个命令行命令可以用来帮助管理存储媒体。本节将介绍在日常系统管理 中经常用到的核心命令`

tips:可移动存储媒体指的是可从PC上轻易移除的媒体，比如CD-ROM、软盘和U盘





**mount**     默认情况下命令会输出当前挂载系统上的设备列表。mount提供如下四部分信息

```shell
媒体的设备文件名
媒体挂载到虚拟目录的挂载点
文件系统类型
已挂载媒体的访问状态

-a 挂载/etc/fstab文件中指定的所有文件系统
-f 使mount命令模拟挂载设备，但并不真的挂载
-F 和-a参数一起使用时，会同时挂载所有文件系统
-v 详细模式，将会说明挂载设备的每一步
-I 不启用任何/sbin/mount.filesystem下的文件系统帮助文件
-l 给ext2、ext3或XFS文件系统自动添加文件系统标签
-n 挂载设备，但不注册到/etc/mtab已挂载设备文件中
-p num 进行加密挂载时，从文件描述符num中获得密码短语
-s 忽略该文件系统不支持的挂载选项
-r 将设备挂载为只读的
-w 将设备挂载为可读写的（默认参数）
-L label 将设备按指定的label挂载
-U uuid 将设备按指定的uuid挂载
-O 和-a参数一起使用，限制命令只作用到特定的一组文件系统上
-o 给文件系统添加特定的选项
	 ro：以只读形式挂载。
	 rw：以读写形式挂载。
	 user：允许普通用户挂载文件系统。
	 check=none：挂载文件系统时不进行完整性校验。
	 loop：挂载一个文件。
```



**mount  -t  类型   设备   目录**    	手动在虚拟目录中挂载设备（root），类型指定了磁盘被格式化的文件类型系统

```shell
forex:  mount -t vfat /dev/sdb1   /media/disk   挂载vfat类型的U盘/dev/sdb1到/media/disk
```



`从Linux系统上移除一个可移动设备时，不能直接从系统上移除，而应先卸载`



**umount 		[目录  |  设备]**   	umonut命令支持通过设备文件或者挂载点来指定要移除的设备。如果有任何程序正在使用设备上的文件，系统不会允许你卸载它



`有时你需要知道某个设备上还有多少磁盘空间，df命令可以方便查看磁盘使用情况`



**df** 			显示每个有数据的已挂载文件系统

```shell
 设备的设备文件位置；
 能容纳多少个1024字节大小的块；
 已用了多少个1024字节大小的块；
 还有多少个1024字节大小的块可用；
 已用空间所占的比例；
 设备挂载到了哪个挂载点上。

-h   按照用户易读方式输出，1kb的块大小 换算成 g/m
```



`通过df命令很容易发现哪个磁盘的存储空间快没了。系统管理员面临的下一个问题是，发生 这种情况时要怎么办。`

**du**    	显示某个特定的目录（默认是当前目录）的磁盘使用情况，可以快速判断系统上某个目录是否有超大文件，以磁盘块为单位表明每个文件占用多大内存。

```shell
 -c：显示所有已列出文件总的大小。
 -h：按用户易读的格式输出大小，即用K替代千字节，用M替代兆字节，用G替代吉字
节。
 -s：显示每个输出参数的总计。

用 du -chs  参数更方便
```



